// Generated by CoffeeScript 1.12.7
(function() {
  $(document).ready(function() {
    var sortDec, submitUserData;
    sortDec = function(a, b) {
      var ref;
      if (a[0] === b[0]) {
        return 0;
      } else {
        return (ref = a[0] < b[0]) != null ? ref : -{
          1: 1
        };
      }
    };
    submitUserData = function(data) {
      return $.ajax({
        url: '/routes/user.php',
        type: 'POST',
        data: data
      });
    };
    return submitUserData({
      method: 'getAll'
    }).then(function(res) {
      var data, gameScore, i, j, k, key, l, len, len1, len2, len3, ref, ref1, ref2, score, scores, userData;
      userData = JSON.parse(res);
      gameScore = {
        g1: [],
        g2: [],
        g3: [],
        g4: []
      };
      ref = Object.keys(gameScore);
      for (i = 0, len = ref.length; i < len; i++) {
        key = ref[i];
        for (j = 0, len1 = userData.length; j < len1; j++) {
          data = userData[j];
          ref1 = data.scores[key];
          for (k = 0, len2 = ref1.length; k < len2; k++) {
            scores = ref1[k];
            gameScore[key].push([parseInt(scores[0]), scores[1], data.username]);
          }
        }
        ref2 = gameScore[key].sort(sortDec);
        for (l = 0, len3 = ref2.length; l < len3; l++) {
          score = ref2[l];
          $('.' + key).append($('<div class="col-lg-4"> <p>' + score[2] + '</p> </div> <div class="col-lg-4"> <p>' + score[0] + '</p> </div> <div class="col-lg-4"> <p class="date">' + score[1] + '</p> </div>'));
        }
      }
      return console.log(gameScore);
    });
  });

}).call(this);
